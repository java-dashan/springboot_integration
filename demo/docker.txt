1.下载docker  yum install docker -y

2.修改镜像源   /etc/docker/daemon.json Docker  (官方中国区  https://registry.docker-cn.com
                                                网易云 http://hub-mirror.c.163.com
                                                阿里云 https://pee6w651.mirror.aliyuncs.com)

            {
                 "registry-mirrors": ["https://docker.mirrors.ustc.edu.cn"] #中国科技大学
            }

            临时指定镜像源: docker pull hub.c.163.com/library/zookeeper:latest //网易云

3.docker下载zookeeper / kafka
docker pull  wurstmeister/zookeeper
docker pull  wurstmeister/kafka


4.使用 docker-compose -f docker-compose.yml up -d 命令启动集群服务  (docker-compose command not exist)

    配置yum 镜像源 vim /etc/yum.repos.d
    查看centOS版本 lsb_release -a 或者 cat /etc/redhat-release
    # 配置为阿里镜像源
        wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo
    # 设置缓存
        yum makecache
    # 更新镜像配置，可以看到阿里镜像源
        yum -y update

    docker-compose安装
    1.curl -L https://get.daocloud.io/docker/compose/releases/download/1.25.0/docker-compose-`uname -s`-`uname -m` > /usr/local/bin/docker-compose
      curl -L https://get.daocloud.io/docker/compose/releases/download/1.24.0/docker-compose-`uname -s`-`uname -m` > /usr/local/bin/docker-compose
      更改权限: chmod +x /usr/local/bin/docker-compose
    2.  python方式
        yum -y install epel-release
        yum -y install python-pip
        pip install -i https://pypi.douban.com/simple  --upgrade pip //使用豆瓣镜像升级pip
        pip install -i https://pypi.douban.com/simple docker-compose //使用豆瓣镜像安装

    docker-compose up -f /xxx.xml -d  (后台运行)  如不指定-f则默认使用当前目录下的docker-compose.xml

    出现xxx:Permission denied时
        临时关闭selinux: 1.getenforce 2.setenforce 0  3.getenforce
        永久关闭: vim /etc/sysconfig/selinux  -->SELINUX=enforcing 改为 SELINUX=disabled

5.  docker 容器管理

    docker ps -a // 查看所有容器
    docker ps -a -q // 查看所有容器ID
    docker stop $(docker ps -a -q) //  stop停止所有容器
    docker  rm $(docker ps -a -q) //   remove删除所有容器
    docker start containId        //启动容器


6.镜像管理
    删除镜像
        docker rmi [image]
        docker image rm [image]
        docker rmi imageId
    清理镜像残存文件
        docker image prune -a, --all: 删除所有没有用的镜像，而不仅仅是临时文件；-f, --force：强制删除镜像文件，无需弹出提示确认；

7.进入容器


8.docker 设置远程访问



注意:   如果image是通过临时指定镜像拉取的,需带上前缀如: docker pull hub.c.163.com/library/zookeeper:latest --> hub.c.163.com/library/zookeeper
       volumes: -./zookeeper/zoo1/data:/data 可以写相对路径
version: '3.1'

services:
  zoo1:
    image:  hub.c.163.com/library/zookeeper
    restart: always
    hostname: zoo1
    container_name: zookeeper_1
    ports:
      - 2181:2181
    volumes:
      - /usr/local/docker_app/zookeeper/zoo1/data:/data
      - /usr/local/docker_app/zookeeper/zoo1/datalog:/datalog
    environment:
      ZOO_MY_ID: 1
      ZOO_SERVERS: server.1=zoo1:2888:3888 server.2=zoo2:2888:3888 server.3=zoo3:2888:3888

  zoo2:
    image:  hub.c.163.com/library/zookeeper
    restart: always
    hostname: zoo2
    container_name: zookeeper_2
    ports:
      - 2182:2181
    volumes:
      - /usr/local/docker_app/zookeeper/zoo2/data:/data
      - /usr/local/docker_app/zookeeper/zoo2/datalog:/datalog
    environment:
      ZOO_MY_ID: 2
      ZOO_SERVERS: server.1=zoo1:2888:3888 server.2=zoo2:2888:3888 server.3=zoo3:2888:3888

  zoo3:
    image:  hub.c.163.com/library/zookeeper
    restart: always
    hostname: zoo3
    container_name: zookeeper_3
    ports:
      - 2183:2181
    volumes:
      - /usr/local/docker_app/zookeeper/zoo3/data:/data
      - /usr/local/docker_app/zookeeper/zoo3/datalog:/datalog
    environment:
      ZOO_MY_ID: 3
      ZOO_SERVERS: server.1=zoo1:2888:3888 server.2=zoo2:2888:3888 server.3=zoo3:2888:3888

